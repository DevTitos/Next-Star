<!-- templates/dashboard/dashboard.html -->
{% extends 'base.html' %}

{% block title %}ðŸŽ® NEXT STAR | Venture Dashboard{% endblock %}

{% block extra_css %}
<style>
    /* Dashboard Layout */
    :root {
        --sidebar-width: 280px;
        --header-height: 80px;
        --card-radius: 16px;
        --section-spacing: 30px;
    }

    .dashboard-container {
        min-height: 100vh;
        display: flex;
        background: var(--dark);
    }

    /* Sidebar */
    .dashboard-sidebar {
        width: var(--sidebar-width);
        background: var(--darker);
        border-right: 1px solid rgba(123, 63, 228, 0.3);
        padding: 30px 20px;
        position: fixed;
        height: 100vh;
        overflow-y: auto;
        z-index: 100;
        transition: transform 0.3s ease;
    }

    .sidebar-header {
        text-align: center;
        margin-bottom: 40px;
    }

    .sidebar-logo {
        font-family: 'Orbitron', sans-serif;
        font-size: 1.8rem;
        font-weight: 900;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }

    .sidebar-user {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 12px;
        margin-bottom: 30px;
    }

    .user-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: var(--gradient);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: bold;
    }

    .user-info h4 {
        margin: 0;
        font-size: 1.1rem;
        color: var(--light);
    }

    .user-info p {
        margin: 0;
        font-size: 0.9rem;
        color: var(--secondary);
    }

    .sidebar-nav {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .nav-item {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px 20px;
        color: var(--light);
        text-decoration: none;
        border-radius: 12px;
        transition: all 0.3s ease;
        border-left: 3px solid transparent;
    }

    .nav-item:hover,
    .nav-item.active {
        background: rgba(123, 63, 228, 0.1);
        border-left-color: var(--primary);
        color: var(--secondary);
    }

    .nav-item i {
        width: 24px;
        text-align: center;
        font-size: 1.2rem;
    }

    .nav-badge {
        margin-left: auto;
        background: var(--primary);
        color: white;
        padding: 3px 8px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: bold;
    }

    .sidebar-footer {
        margin-top: auto;
        padding-top: 30px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .logout-btn {
        width: 100%;
        padding: 12px;
        background: rgba(255, 77, 232, 0.1);
        border: 1px solid rgba(255, 77, 232, 0.3);
        color: var(--accent);
        border-radius: 12px;
        text-align: center;
        text-decoration: none;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        transition: all 0.3s ease;
    }

    .logout-btn:hover {
        background: rgba(255, 77, 232, 0.2);
        transform: translateY(-2px);
    }

    /* Main Content */
    .dashboard-main {
        flex: 1;
        margin-left: var(--sidebar-width);
        padding: 30px;
        overflow-x: hidden;
    }

    /* Header */
    .dashboard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 40px;
        padding-bottom: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .header-title h1 {
        font-size: 2.5rem;
        margin: 0;
        background: var(--afro-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .header-title p {
        margin: 5px 0 0;
        color: var(--secondary);
        font-size: 1.1rem;
    }

    .header-actions {
        display: flex;
        gap: 15px;
        align-items: center;
    }

    .quick-stats {
        display: flex;
        gap: 20px;
    }

    .stat-badge {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 20px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 12px;
        border: 1px solid rgba(123, 63, 228, 0.2);
    }

    .stat-badge i {
        font-size: 1.5rem;
        color: var(--secondary);
    }

    .stat-badge span {
        font-size: 1.8rem;
        font-weight: bold;
        font-family: 'Orbitron', sans-serif;
        color: var(--light);
    }

    .stat-badge small {
        display: block;
        font-size: 0.9rem;
        color: rgba(232, 244, 255, 0.7);
    }

    /* Search */
    .search-box {
        position: relative;
        width: 300px;
    }

    .search-box input {
        width: 100%;
        padding: 12px 20px 12px 45px;
        background: rgba(255, 255, 255, 0.05);
        border: 2px solid rgba(123, 63, 228, 0.3);
        border-radius: 12px;
        color: var(--light);
        font-size: 1rem;
        transition: all 0.3s ease;
    }

    .search-box input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(123, 63, 228, 0.2);
    }

    .search-box i {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--secondary);
        font-size: 1.2rem;
    }

    /* Content Sections */
    .content-grid {
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        gap: var(--section-spacing);
    }

    .section-card {
        background: rgba(255, 255, 255, 0.05);
        border-radius: var(--card-radius);
        border: 1px solid rgba(123, 63, 228, 0.2);
        padding: 30px;
        backdrop-filter: blur(10px);
    }

    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
    }

    .section-header h2 {
        font-size: 1.8rem;
        color: var(--light);
        margin: 0;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .section-header h2 i {
        color: var(--secondary);
    }

    .section-actions {
        display: flex;
        gap: 10px;
    }

    /* Overview Section */
    .overview-grid {
        grid-column: span 8;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: rgba(255, 255, 255, 0.03);
        border-radius: 12px;
        padding: 25px;
        border: 1px solid rgba(123, 63, 228, 0.1);
        transition: all 0.3s ease;
    }

    .stat-card:hover {
        transform: translateY(-5px);
        border-color: var(--primary);
        box-shadow: 0 10px 20px rgba(123, 63, 228, 0.1);
    }

    .stat-card .stat-value {
        font-family: 'Orbitron', sans-serif;
        font-size: 2.5rem;
        font-weight: 900;
        margin-bottom: 10px;
        background: var(--gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .stat-card .stat-label {
        color: rgba(232, 244, 255, 0.7);
        font-size: 0.95rem;
        margin-bottom: 15px;
    }

    .stat-progress {
        height: 6px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
        overflow: hidden;
    }

    .stat-progress-bar {
        height: 100%;
        background: var(--gradient);
        border-radius: 3px;
        transition: width 1s ease;
    }

    /* Activity Section */
    .activity-section {
        grid-column: span 4;
    }

    .activity-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .activity-item {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        transition: all 0.3s ease;
    }

    .activity-item:hover {
        background: rgba(255, 255, 255, 0.05);
        transform: translateX(5px);
    }

    .activity-icon {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
    }

    .activity-content {
        flex: 1;
    }

    .activity-title {
        font-weight: 600;
        color: var(--light);
        margin-bottom: 5px;
    }

    .activity-description {
        font-size: 0.9rem;
        color: rgba(232, 244, 255, 0.7);
        margin-bottom: 5px;
    }

    .activity-time {
        font-size: 0.8rem;
        color: var(--secondary);
    }

    .activity-amount {
        font-weight: bold;
        font-family: 'Orbitron', sans-serif;
    }

    /* Games Section */
    .games-section {
        grid-column: span 8;
    }

    .games-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
    }

    .game-card {
        background: rgba(255, 255, 255, 0.03);
        border-radius: 16px;
        padding: 25px;
        border: 1px solid rgba(123, 63, 228, 0.2);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .game-card:hover {
        transform: translateY(-10px);
        border-color: var(--primary);
        box-shadow: 0 15px 30px rgba(123, 63, 228, 0.2);
    }

    .game-header {
        display: flex;
        justify-content: space-between;
        align-items: start;
        margin-bottom: 20px;
    }

    .game-icon {
        width: 60px;
        height: 60px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8rem;
        color: white;
    }

    .game-status {
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: bold;
    }

    .game-status.active {
        background: rgba(0, 255, 157, 0.1);
        color: var(--success);
        border: 1px solid rgba(0, 255, 157, 0.3);
    }

    .game-title {
        font-size: 1.4rem;
        font-weight: bold;
        color: var(--light);
        margin-bottom: 10px;
    }

    .game-meta {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
    }

    .game-meta-item {
        display: flex;
        align-items: center;
        gap: 8px;
        color: rgba(232, 244, 255, 0.7);
        font-size: 0.9rem;
    }

    .game-meta-item i {
        color: var(--secondary);
    }

    .game-progress {
        margin-bottom: 20px;
    }

    .progress-label {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
        font-size: 0.9rem;
        color: rgba(232, 244, 255, 0.7);
    }

    .progress-bar {
        height: 8px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        overflow: hidden;
    }

    .progress-fill {
        height: 100%;
        background: var(--gradient);
        border-radius: 4px;
        transition: width 1s ease;
    }

    .game-actions {
        display: flex;
        gap: 10px;
    }

    /* Ventures Section */
    .ventures-section {
        grid-column: span 4;
    }

    .ventures-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .venture-card {
        background: rgba(255, 255, 255, 0.03);
        border-radius: 12px;
        padding: 20px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        transition: all 0.3s ease;
    }

    .venture-card:hover {
        background: rgba(255, 255, 255, 0.05);
        border-color: var(--primary);
    }

    .venture-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }

    .venture-name {
        font-weight: bold;
        color: var(--light);
        font-size: 1.1rem;
    }

    .venture-equity {
        background: var(--primary);
        color: white;
        padding: 3px 10px;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: bold;
    }

    .venture-industry {
        color: var(--secondary);
        font-size: 0.9rem;
        margin-bottom: 10px;
    }

    .venture-stats {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .venture-value {
        font-family: 'Orbitron', sans-serif;
        font-size: 1.2rem;
        font-weight: bold;
        color: var(--light);
    }

    .venture-growth {
        display: flex;
        align-items: center;
        gap: 5px;
        color: var(--success);
        font-weight: bold;
    }

    .venture-growth.negative {
        color: var(--danger);
    }

    /* Wallet Section */
    .wallet-section {
        grid-column: span 12;
    }

    .wallet-overview {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .wallet-card {
        background: rgba(255, 255, 255, 0.03);
        border-radius: 16px;
        padding: 25px;
        border: 1px solid rgba(123, 63, 228, 0.2);
        transition: all 0.3s ease;
    }

    .wallet-card:hover {
        transform: translateY(-5px);
        border-color: var(--primary);
    }

    .wallet-card-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
    }

    .wallet-card-header i {
        font-size: 2rem;
        color: var(--secondary);
    }

    .wallet-card-title {
        font-size: 1.2rem;
        font-weight: bold;
        color: var(--light);
        margin: 0;
    }

    .wallet-balance {
        font-family: 'Orbitron', sans-serif;
        font-size: 2.5rem;
        font-weight: 900;
        margin-bottom: 10px;
        background: var(--gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .wallet-label {
        color: rgba(232, 244, 255, 0.7);
        font-size: 0.95rem;
        margin-bottom: 15px;
    }

    .wallet-address {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 20px;
        font-family: monospace;
        font-size: 0.9rem;
        color: var(--light);
        word-break: break-all;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .wallet-actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .wallet-btn {
        padding: 10px 20px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(123, 63, 228, 0.3);
        border-radius: 8px;
        color: var(--light);
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        font-size: 0.9rem;
    }

    .wallet-btn:hover {
        background: rgba(123, 63, 228, 0.1);
        transform: translateY(-2px);
    }

    .wallet-btn.primary {
        background: var(--gradient);
        border: none;
        color: white;
    }

    .wallet-btn.primary:hover {
        box-shadow: 0 5px 15px rgba(123, 63, 228, 0.3);
    }

    .transactions-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }

    .transactions-table th,
    .transactions-table td {
        padding: 15px;
        text-align: left;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .transactions-table th {
        color: var(--secondary);
        font-weight: 600;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .transactions-table td {
        color: var(--light);
        font-size: 0.95rem;
    }

    .tx-type {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .tx-type.received i {
        color: var(--success);
    }

    .tx-type.sent i {
        color: var(--accent);
    }

    .tx-amount {
        font-family: 'Orbitron', sans-serif;
        font-weight: bold;
    }

    .tx-amount.positive {
        color: var(--success);
    }

    .tx-amount.negative {
        color: var(--accent);
    }

    .tx-status {
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: bold;
    }

    .tx-status.confirmed {
        background: rgba(0, 255, 157, 0.1);
        color: var(--success);
        border: 1px solid rgba(0, 255, 157, 0.3);
    }

    /* Profile Section */
    .profile-section {
        grid-column: span 12;
    }

    .profile-grid {
        display: grid;
        grid-template-columns: 300px 1fr;
        gap: 40px;
    }

    .profile-sidebar {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .profile-card {
        background: rgba(255, 255, 255, 0.03);
        border-radius: 16px;
        padding: 25px;
        border: 1px solid rgba(123, 63, 228, 0.2);
    }

    .profile-avatar {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: var(--gradient);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
        font-weight: bold;
        color: white;
        margin: 0 auto 20px;
    }

    .profile-name {
        text-align: center;
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--light);
        margin-bottom: 5px;
    }

    .profile-role {
        text-align: center;
        color: var(--secondary);
        margin-bottom: 20px;
    }

    .profile-stats {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .profile-stat {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .profile-stat:last-child {
        border-bottom: none;
    }

    .stat-label {
        color: rgba(232, 244, 255, 0.7);
        font-size: 0.9rem;
    }

    .stat-value {
        font-family: 'Orbitron', sans-serif;
        font-weight: bold;
        color: var(--light);
    }

    .profile-form {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .form-row {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
    }

    .form-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .form-label {
        color: var(--light);
        font-weight: 600;
        font-size: 0.95rem;
    }

    /* Leaderboard Section */
    .leaderboard-section {
        grid-column: span 12;
    }

    .leaderboard-table {
        width: 100%;
        border-collapse: collapse;
    }

    .leaderboard-table th,
    .leaderboard-table td {
        padding: 20px;
        text-align: left;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .leaderboard-table th {
        color: var(--secondary);
        font-weight: 600;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .leaderboard-table td {
        color: var(--light);
        font-size: 1rem;
    }

    .rank-cell {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .rank-number {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-family: 'Orbitron', sans-serif;
    }

    .rank-1 {
        background: linear-gradient(135deg, #FFD700, #FFA500);
        color: black;
    }

    .rank-2 {
        background: linear-gradient(135deg, #C0C0C0, #A0A0A0);
        color: black;
    }

    .rank-3 {
        background: linear-gradient(135deg, #CD7F32, #A0522D);
        color: black;
    }

    .rank-other {
        background: rgba(255, 255, 255, 0.05);
        color: var(--light);
    }

    .player-name {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .current-player {
        color: var(--secondary);
        font-weight: bold;
    }

    .rank-change {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 0.9rem;
    }

    .rank-change.up {
        color: var(--success);
    }

    .rank-change.down {
        color: var(--danger);
    }

    .rank-change.same {
        color: var(--warning);
    }

    /* Modal */
    .modal-content {
        background: var(--darker);
        border: 1px solid rgba(123, 63, 228, 0.3);
        border-radius: 16px;
        color: var(--light);
    }

    .modal-header {
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        padding: 25px 30px;
    }

    .modal-header h5 {
        font-size: 1.5rem;
        color: var(--light);
        margin: 0;
    }

    .modal-body {
        padding: 30px;
    }

    .modal-footer {
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        padding: 20px 30px;
    }

    /* Responsive */
    @media (max-width: 1200px) {
        .content-grid {
            grid-template-columns: 1fr;
        }
        
        .overview-grid,
        .games-section,
        .activity-section,
        .ventures-section,
        .profile-section,
        .leaderboard-section,
        .wallet-section {
            grid-column: span 1;
        }
        
        .profile-grid {
            grid-template-columns: 1fr;
        }
    }

    @media (max-width: 992px) {
        .dashboard-sidebar {
            transform: translateX(-100%);
            z-index: 1000;
        }
        
        .dashboard-sidebar.active {
            transform: translateX(0);
        }
        
        .dashboard-main {
            margin-left: 0;
        }
        
        .sidebar-toggle {
            display: block !important;
        }
        
        .header-actions {
            flex-wrap: wrap;
        }
        
        .search-box {
            width: 100%;
        }
    }

    @media (max-width: 768px) {
        .dashboard-main {
            padding: 20px;
        }
        
        .stats-grid,
        .form-row {
            grid-template-columns: 1fr;
        }
        
        .quick-stats {
            display: none;
        }
        
        .section-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 15px;
        }
        
        .games-grid {
            grid-template-columns: 1fr;
        }
        
        .wallet-overview {
            grid-template-columns: 1fr;
        }
    }

    /* Mobile Sidebar Toggle */
    .sidebar-toggle {
        display: none;
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1001;
        background: var(--primary);
        color: white;
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        cursor: pointer;
        box-shadow: 0 5px 15px rgba(123, 63, 228, 0.3);
    }
</style>
{% endblock %}

{% block content %}
    <!-- Mobile Sidebar Toggle -->
    <div class="sidebar-toggle" id="sidebarToggle">
        <i class="fas fa-bars"></i>
    </div>

    <!-- Dashboard Container -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="dashboard-sidebar" id="dashboardSidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo gradient-text">
                    <i class="fas fa-star"></i>
                    NEXT STAR
                </div>
                <div style="color: var(--secondary); font-size: 0.9rem;">Venture Dashboard</div>
            </div>

            <!-- User Info -->
            <div class="sidebar-user">
                <div class="user-avatar">
                    {{ user.first_name|first }}{{ user.last_name|first }}
                </div>
                <div class="user-info">
                    <h4>{{ user.get_full_name }}</h4>
                    <p>{{ user_stats.rank }}</p>
                </div>
            </div>

            <!-- Navigation -->
            <nav class="sidebar-nav">
                <a href="#overview" class="nav-item active" data-section="overview">
                    <i class="fas fa-home"></i>
                    <span>Overview</span>
                </a>
                
                <a href="#games" class="nav-item" data-section="games">
                    <i class="fas fa-gamepad"></i>
                    <span>Games</span>
                    <span class="nav-badge">{{ active_games|length }}</span>
                </a>
                
                <a href="#ventures" class="nav-item" data-section="ventures">
                    <i class="fas fa-chart-line"></i>
                    <span>Ventures</span>
                    <span class="nav-badge">{{ user_stats.total_ventures }}</span>
                </a>
                
                <a href="#wallet" class="nav-item" data-section="wallet">
                    <i class="fas fa-wallet"></i>
                    <span>Wallet</span>
                    <span class="nav-badge">{{ wallet_data.nfts }} NFTs</span>
                </a>
                
                <a href="#profile" class="nav-item" data-section="profile">
                    <i class="fas fa-user"></i>
                    <span>Profile</span>
                </a>
                
                <a href="#leaderboard" class="nav-item" data-section="leaderboard">
                    <i class="fas fa-trophy"></i>
                    <span>Leaderboard</span>
                </a>
                
                <a href="#strategy" class="nav-item" data-section="strategy">
                    <i class="fas fa-lightbulb"></i>
                    <span>Strategy</span>
                </a>
            </nav>

            <!-- Footer -->
            <div class="sidebar-footer">
                <div class="sidebar-stats">
                    <div class="profile-stat">
                        <span class="stat-label">Level</span>
                        <span class="stat-value">{{ user_stats.level }}</span>
                    </div>
                    <div class="profile-stat">
                        <span class="stat-label">Streak</span>
                        <span class="stat-value">{{ user_stats.streak }} days</span>
                    </div>
                </div>
                
                <a href="{% url 'logout' %}" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="dashboard-main">
            <!-- Header -->
            <div class="dashboard-header">
                <div class="header-title">
                    <h1 id="sectionTitle">Venture Dashboard</h1>
                    <p id="sectionSubtitle">Welcome back, {{ user.first_name }}! Ready to build empires?</p>
                </div>
                
                <div class="header-actions">
                    <div class="quick-stats">
                        <div class="stat-badge">
                            <i class="fas fa-star"></i>
                            <div>
                                <span>{{ wallet_data.star_tokens }}</span>
                                <small>STAR Tokens</small>
                            </div>
                        </div>
                        <div class="stat-badge">
                            <i class="fas fa-ticket-alt"></i>
                            <div>
                                <span>{{ wallet_data.tickets }}</span>
                                <small>Tickets</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search games, ventures, players...">
                    </div>
                </div>
            </div>

            <!-- Content Sections -->
            <div class="content-grid">
                <!-- Overview Section (Default) -->
                <section id="overview" class="content-section overview-grid" style="display: block;">
                    <div class="section-card">
                        <div class="section-header">
                            <h2><i class="fas fa-chart-bar"></i> Venture Stats</h2>
                            <div class="section-actions">
                                <span class="badge bg-gradient rounded-pill">Today: {{ today|date:"M d, Y" }}</span>
                            </div>
                        </div>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value">${{ user_stats.total_invested|floatformat:0 }}</div>
                                <div class="stat-label">Total Venture Value</div>
                                <div class="stat-progress">
                                    <div class="stat-progress-bar" style="width: 75%"></div>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-value">{{ user_stats.total_ventures }}</div>
                                <div class="stat-label">Active Ventures</div>
                                <div class="stat-progress">
                                    <div class="stat-progress-bar" style="width: 60%"></div>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-value">{{ user_stats.win_rate }}%</div>
                                <div class="stat-label">Win Rate</div>
                                <div class="stat-progress">
                                    <div class="stat-progress-bar" style="width: {{ user_stats.win_rate }}%"></div>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-value">{{ user_stats.total_wins }}</div>
                                <div class="stat-label">Total Wins</div>
                                <div class="stat-progress">
                                    <div class="stat-progress-bar" style="width: 90%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="section-header" style="margin-top: 40px;">
                            <h2><i class="fas fa-gamepad"></i> Active Games</h2>
                            <div class="section-actions">
                                <a href="#games" class="btn-gradient" style="padding: 8px 20px;">View All</a>
                            </div>
                        </div>
                        
                        <div class="games-grid" style="margin-top: 20px;">
                            {% for game in active_games|slice:":2" %}
                            <div class="game-card">
                                <div class="game-header">
                                    <div class="game-icon" style="background: var(--{{ game.color }});">
                                        <i class="fas {{ game.icon }}"></i>
                                    </div>
                                    <span class="game-status active">{{ game.status|title }}</span>
                                </div>
                                
                                <h3 class="game-title">{{ game.name }}</h3>
                                
                                <div class="game-meta">
                                    <div class="game-meta-item">
                                        <i class="fas fa-users"></i>
                                        <span>{{ game.players }} players</span>
                                    </div>
                                    <div class="game-meta-item">
                                        <i class="fas fa-trophy"></i>
                                        <span>${{ game.prize_pool }}</span>
                                    </div>
                                </div>
                                
                                <div class="game-progress">
                                    <div class="progress-label">
                                        <span>Time remaining</span>
                                        <span>{{ game.ends_in }}</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: {{ game.progress }}%"></div>
                                    </div>
                                </div>
                                
                                <div class="game-actions">
                                    <button class="btn-gradient" style="padding: 10px 20px; font-size: 0.9rem;">
                                        <i class="fas fa-play"></i> Join Game
                                    </button>
                                    <button class="btn-outline-gradient" style="padding: 10px 20px; font-size: 0.9rem;">
                                        <i class="fas fa-info-circle"></i> Details
                                    </button>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </section>

                <!-- Activity Section -->
                <section id="activity" class="content-section activity-section" style="display: none;">
                    <div class="section-card">
                        <div class="section-header">
                            <h2><i class="fas fa-bolt"></i> Recent Activity</h2>
                        </div>
                        
                        <div class="activity-list">
                            {% for activity in recent_activity %}
                            <div class="activity-item">
                                <div class="activity-icon" style="background: rgba({{ activity.color_code }}, 0.1); color: var(--{{ activity.color }});">
                                    <i class="fas {{ activity.icon }}"></i>
                                </div>
                                
                                <div class="activity-content">
                                    <div class="activity-title">{{ activity.title }}</div>
                                    <div class="activity-description">{{ activity.description }}</div>
                                    <div class="activity-time">{{ activity.time }}</div>
                                </div>
                                
                                <div class="activity-amount" style="color: {% if activity.amount|first == '+' %}var(--success){% elif activity.amount|first == '-' %}var(--accent){% else %}var(--light){% endif %}">
                                    {{ activity.amount }}
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </section>

                <!-- Games Section -->
                <section id="games" class="content-section games-section" style="display: none;">
                    <div class="section-card">
                        <div class="section-header">
                            <h2><i class="fas fa-gamepad"></i> Active Games</h2>
                            <div class="section-actions">
                                <button class="btn-gradient" data-bs-toggle="modal" data-bs-target="#buyTicketModal">
                                    <i class="fas fa-ticket-alt"></i> Buy Tickets
                                </button>
                            </div>
                        </div>
                        
                        <div class="games-grid">
                            {% for game in active_games %}
                            <div class="game-card">
                                <div class="game-header">
                                    <div class="game-icon" style="background: var(--{{ game.color }});">
                                        <i class="fas {{ game.icon }}"></i>
                                    </div>
                                    <span class="game-status active">{{ game.status|title }}</span>
                                </div>
                                
                                <h3 class="game-title">{{ game.name }}</h3>
                                <div class="game-type" style="color: var(--secondary); margin-bottom: 15px;">{{ game.type }}</div>
                                
                                <div class="game-meta">
                                    <div class="game-meta-item">
                                        <i class="fas fa-users"></i>
                                        <span>{{ game.players }} players</span>
                                    </div>
                                    <div class="game-meta-item">
                                        <i class="fas fa-trophy"></i>
                                        <span>${{ game.prize_pool|floatformat:0 }}</span>
                                    </div>
                                    <div class="game-meta-item">
                                        <i class="fas fa-clock"></i>
                                        <span>{{ game.ends_in }}</span>
                                    </div>
                                </div>
                                
                                <div class="game-progress">
                                    <div class="progress-label">
                                        <span>Progress</span>
                                        <span>{{ game.progress }}%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: {{ game.progress }}%"></div>
                                    </div>
                                </div>
                                
                                <div class="game-actions">
                                    <button class="btn-gradient join-game" data-game-id="{{ game.id }}">
                                        <i class="fas fa-play"></i> Join Game
                                    </button>
                                    <button class="btn-outline-gradient view-game" data-game-id="{{ game.id }}">
                                        <i class="fas fa-info-circle"></i> Details
                                    </button>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </section>

                <!-- Ventures Section -->
                <section id="ventures" class="content-section ventures-section" style="display: none;">
                    <div class="section-card">
                        <div class="section-header">
                            <h2><i class="fas fa-chart-line"></i> My Ventures</h2>
                            <div class="section-actions">
                                <button class="btn-gradient" data-bs-toggle="modal" data-bs-target="#createVentureModal">
                                    <i class="fas fa-plus"></i> New Venture
                                </button>
                            </div>
                        </div>
                        
                        <div class="ventures-list">
                            {% for venture in user_ventures %}
                            <div class="venture-card">
                                <div class="venture-header">
                                    <div class="venture-name">{{ venture.name }}</div>
                                    <div class="venture-equity">{{ venture.equity }}%</div>
                                </div>
                                
                                <div class="venture-industry">
                                    <i class="fas fa-industry"></i> {{ venture.industry }}
                                    <span style="margin-left: 20px;">
                                        <i class="fas fa-user-friends"></i> {{ venture.members }} members
                                    </span>
                                </div>
                                
                                <div class="venture-stats">
                                    <div class="venture-value">${{ venture.value|floatformat:0 }}</div>
                                    <div class="venture-growth {% if venture.growth < 0 %}negative{% endif %}">
                                        <i class="fas fa-arrow-{% if venture.growth >= 0 %}up{% else %}down{% endif %}"></i>
                                        {{ venture.growth|floatformat:1 }}%
                                    </div>
                                </div>
                                
                                <div style="margin-top: 15px; display: flex; gap: 10px;">
                                    <span class="badge {% if venture.role == 'CEO' %}bg-gradient{% else %}bg-secondary{% endif %} rounded-pill">
                                        {{ venture.role }}
                                    </span>
                                    <span class="badge {% if venture.status == 'active' %}bg-success{% else %}bg-warning{% endif %} rounded-pill">
                                        {{ venture.status|title }}
                                    </span>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </section>

                <!-- Wallet Section -->
                <section id="wallet" class="content-section wallet-section" style="display: none;">
                    <div class="section-card">
                        <div class="section-header">
                            <h2><i class="fas fa-wallet"></i> Venture Wallet</h2>
                            <div class="section-actions">
                                <button class="btn-gradient" data-bs-toggle="modal" data-bs-target="#sendTokensModal">
                                    <i class="fas fa-paper-plane"></i> Send Tokens
                                </button>
                            </div>
                        </div>
                        
                        <div class="wallet-overview">
                            <div class="wallet-card">
                                <div class="wallet-card-header">
                                    <i class="fas fa-coins"></i>
                                    <h3 class="wallet-card-title">STAR Tokens</h3>
                                </div>
                                <div class="wallet-balance">{{ wallet_data.star_tokens }} STAR</div>
                                <div class="wallet-label">Available balance for gaming and investments</div>
                                <div class="wallet-actions">
                                    <button class="wallet-btn primary" data-bs-toggle="modal" data-bs-target="#buyTokensModal">
                                        <i class="fas fa-shopping-cart"></i> Buy Tokens
                                    </button>
                                    <button class="wallet-btn" data-bs-toggle="modal" data-bs-target="#stakeTokensModal">
                                        <i class="fas fa-lock"></i> Stake
                                    </button>
                                </div>
                            </div>
                            
                            <div class="wallet-card">
                                <div class="wallet-card-header">
                                    <i class="fas fa-ticket-alt"></i>
                                    <h3 class="wallet-card-title">Game Tickets</h3>
                                </div>
                                <div class="wallet-balance">{{ wallet_data.tickets }}</div>
                                <div class="wallet-label">Available game entry tickets</div>
                                <div class="wallet-actions">
                                    <button class="wallet-btn primary" data-bs-toggle="modal" data-bs-target="#buyTicketModal">
                                        <i class="fas fa-plus"></i> Buy Tickets
                                    </button>
                                    <a href="#games" class="wallet-btn">
                                        <i class="fas fa-gamepad"></i> Use Ticket
                                    </a>
                                </div>
                            </div>
                            
                            <div class="wallet-card">
                                <div class="wallet-card-header">
                                    <i class="fas fa-certificate"></i>
                                    <h3 class="wallet-card-title">NFT Assets</h3>
                                </div>
                                <div class="wallet-balance">{{ wallet_data.nfts }}</div>
                                <div class="wallet-label">Equity certificates and collectibles</div>
                                <div class="wallet-actions">
                                    <button class="wallet-btn primary" onclick="viewNFTs()">
                                        <i class="fas fa-eye"></i> View NFTs
                                    </button>
                                    <button class="wallet-btn" data-bs-toggle="modal" data-bs-target="#marketplaceModal">
                                        <i class="fas fa-store"></i> Marketplace
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Wallet Address -->
                        <div style="margin: 30px 0;">
                            <h3 style="color: var(--light); margin-bottom: 15px;">
                                <i class="fas fa-address-card"></i> Wallet Address
                            </h3>
                            <div class="wallet-address">
                                {{ wallet_data.public_key }}
                            </div>
                            <div class="wallet-actions" style="margin-top: 15px;">
                                <button class="wallet-btn" onclick="copyWalletAddress()">
                                    <i class="fas fa-copy"></i> Copy Address
                                </button>
                                <button class="wallet-btn" onclick="viewOnExplorer()">
                                    <i class="fas fa-external-link-alt"></i> View on Explorer
                                </button>
                                <button class="wallet-btn" onclick="showFullAddress()">
                                    <i class="fas fa-eye"></i> Show Full Address
                                </button>
                            </div>
                        </div>
                        
                        <!-- Recent Transactions -->
                        <div style="margin-top: 40px;">
                            <h3 style="color: var(--light); margin-bottom: 20px;">
                                <i class="fas fa-exchange-alt"></i> Recent Transactions
                            </h3>

                            <div class="table-responsive">
                                <table class="transactions-table">
                                    <thead>
                                        <tr>
                                            <th>Transaction</th>
                                            <th>Amount</th>
                                            <th>Counterparty</th>
                                            <th>Time</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for tx in wallet_data.recent_transactions %}
                                        <tr>
                                            <td>
                                                <div class="tx-type {{ tx.type }}">
                                                    {% if tx.type == 'received' %}
                                                        <i class="fas fa-arrow-down"></i>
                                                    {% else %}
                                                        <i class="fas fa-arrow-up"></i>
                                                    {% endif %}
                                                    <span>{{ tx.id }}</span>
                                                </div>
                                            </td>
                                            <td class="tx-amount {% if tx.type == 'received' %}positive{% else %}negative{% endif %}">
                                                {% if tx.type == 'received' %}+{% else %}-{% endif %}{{ tx.amount }} {{ tx.token }}
                                            </td>
                                            <td>
                                                {% if tx.type == 'received' %}
                                                    {{ tx.from }}
                                                {% else %}
                                                    {{ tx.to }}
                                                {% endif %}
                                            </td>
                                            <td>{{ tx.time }}</td>
                                            <td>
                                                <span class="tx-status confirmed">{{ tx.status }}</span>
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Profile Section -->
                <section id="profile" class="content-section profile-section" style="display: none;">
                    <div class="section-card">
                        <div class="section-header">
                            <h2><i class="fas fa-user"></i> Profile Settings</h2>
                        </div>
                        
                        <div class="profile-grid">
                            <!-- Profile Sidebar -->
                            <div class="profile-sidebar">
                                <div class="profile-card">
                                    <div class="profile-avatar">
                                        {{ user.first_name|first }}{{ user.last_name|first }}
                                    </div>
                                    <div class="profile-name">{{ user.get_full_name }}</div>
                                    <div class="profile-role">{{ user_stats.rank }}</div>
                                    
                                    <div class="profile-stats">
                                        <div class="profile-stat">
                                            <span class="stat-label">Level</span>
                                            <span class="stat-value">{{ user_stats.level }}</span>
                                        </div>
                                        <div class="profile-stat">
                                            <span class="stat-label">XP</span>
                                            <span class="stat-value">{{ user_stats.xp }}/{{ user_stats.xp_needed }}</span>
                                        </div>
                                        <div class="profile-stat">
                                            <span class="stat-label">Streak</span>
                                            <span class="stat-value">{{ user_stats.streak }} days</span>
                                        </div>
                                        <div class="profile-stat">
                                            <span class="stat-label">Member Since</span>
                                            <span class="stat-value">{{ user.date_joined|date:"M Y" }}</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="profile-card">
                                    <h3 style="color: var(--light); margin-bottom: 20px;">Account Security</h3>
                                    <div class="wallet-actions">
                                        <button class="wallet-btn" onclick="changePassword()">
                                            <i class="fas fa-key"></i> Change Password
                                        </button>
                                        <button class="wallet-btn" onclick="setup2FA()">
                                            <i class="fas fa-shield-alt"></i> 2FA Setup
                                        </button>
                                        <button class="wallet-btn" onclick="exportWallet()">
                                            <i class="fas fa-download"></i> Export Wallet
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Profile Form -->
                            <div class="profile-card">
                                <h3 style="color: var(--light); margin-bottom: 25px;">Edit Profile</h3>
                                
                                <form id="profileForm" class="profile-form">
                                    {% csrf_token %}
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label class="form-label">First Name</label>
                                            <input type="text" class="form-control" name="first_name" value="{{ user.first_name }}" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label class="form-label">Last Name</label>
                                            <input type="text" class="form-control" name="last_name" value="{{ user.last_name }}" required>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Email Address</label>
                                        <input type="email" class="form-control" name="email" value="{{ user.email }}" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Bio</label>
                                        <textarea class="form-control" name="bio" rows="4" placeholder="Tell us about yourself...">Venture capitalist and game enthusiast</textarea>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label class="form-label">Location</label>
                                            <input type="text" class="form-control" name="location" value="Nairobi, Kenya">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label class="form-label">Website</label>
                                            <input type="url" class="form-control" name="website" placeholder="https://">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Notification Preferences</label>
                                        <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 10px;">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="notifyGames" checked>
                                                <label class="form-check-label" for="notifyGames">
                                                    New game announcements
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="notifyVentures" checked>
                                                <label class="form-check-label" for="notifyVentures">
                                                    Venture updates
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="notifyWallet" checked>
                                                <label class="form-check-label" for="notifyWallet">
                                                    Wallet transactions
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div style="display: flex; gap: 15px; margin-top: 30px;">
                                        <button type="submit" class="btn-gradient" style="padding: 12px 30px;">
                                            <i class="fas fa-save"></i> Save Changes
                                        </button>
                                        <button type="button" class="btn-outline-gradient" style="padding: 12px 30px;">
                                            Cancel
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Leaderboard Section -->
                <section id="leaderboard" class="content-section leaderboard-section" style="display: none;">
                    <div class="section-card">
                        <div class="section-header">
                            <h2><i class="fas fa-trophy"></i> Venture Leaderboard</h2>
                            <div class="section-actions">
                                <span class="badge bg-gradient rounded-pill">Season 2025.1</span>
                            </div>
                        </div>
                        
                        <div class="table-responsive">
                            <table class="leaderboard-table">
                                <thead>
                                    <tr>
                                        <th>Rank</th>
                                        <th>Player</th>
                                        <th>Score</th>
                                        <th>Ventures</th>
                                        <th>Change</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for player in leaderboard %}
                                    <tr>
                                        <td>
                                            <div class="rank-cell">
                                                <div class="rank-number rank-{{ player.rank }}">
                                                    {{ player.rank }}
                                                </div>
                                                {% if player.rank <= 3 %}
                                                <i class="fas fa-crown" style="color: {% if player.rank == 1 %}#FFD700{% elif player.rank == 2 %}#C0C0C0{% else %}#CD7F32{% endif %}"></i>
                                                {% endif %}
                                            </div>
                                        </td>
                                        <td>
                                            <div class="player-name {% if player.name == user.first_name %}current-player{% endif %}">
                                                {% if player.name == user.first_name %}
                                                <i class="fas fa-user-circle"></i>
                                                {% endif %}
                                                {{ player.name }}
                                            </div>
                                        </td>
                                        <td>{{ player.score|floatformat:0 }}</td>
                                        <td>{{ player.ventures }}</td>
                                        <td>
                                            <div class="rank-change {{ player.change }}">
                                                {% if player.change == 'up' %}
                                                <i class="fas fa-arrow-up"></i> Up
                                                {% elif player.change == 'down' %}
                                                <i class="fas fa-arrow-down"></i> Down
                                                {% else %}
                                                <i class="fas fa-minus"></i> Same
                                                {% endif %}
                                            </div>
                                        </td>
                                        <td>
                                            <button class="btn-outline-gradient" style="padding: 5px 15px; font-size: 0.9rem;">
                                                <i class="fas fa-user-plus"></i> Follow
                                            </button>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        
                        <div style="margin-top: 30px; padding: 20px; background: rgba(123, 63, 228, 0.05); border-radius: 12px;">
                            <h4 style="color: var(--light); margin-bottom: 15px;">
                                <i class="fas fa-info-circle"></i> How Ranking Works
                            </h4>
                            <p style="color: rgba(232, 244, 255, 0.8); margin: 0;">
                                Ranking is based on total venture value, win rate, and active participation. 
                                Top players receive bonus STAR tokens and exclusive NFT rewards at the end of each season.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- Strategy Section -->
                <section id="strategy" class="content-section" style="display: none;">
                    <div class="section-card">
                        <div class="section-header">
                            <h2><i class="fas fa-lightbulb"></i> Strategy Builder</h2>
                            <div class="section-actions">
                                <button class="btn-gradient" data-bs-toggle="modal" data-bs-target="#submitStrategyModal">
                                    <i class="fas fa-plus"></i> New Strategy
                                </button>
                            </div>
                        </div>
                        
                        <div style="text-align: center; padding: 60px 20px;">
                            <i class="fas fa-lightbulb" style="font-size: 4rem; color: var(--secondary); margin-bottom: 20px;"></i>
                            <h3 style="color: var(--light); margin-bottom: 15px;">Craft Winning Strategies</h3>
                            <p style="color: rgba(232, 244, 255, 0.8); max-width: 600px; margin: 0 auto 30px;">
                                Submit your business strategies for venture arenas. Winning strategies become real startups, 
                                and you become the CEO with 20% equity!
                            </p>
                            <button class="btn-gradient" data-bs-toggle="modal" data-bs-target="#submitStrategyModal" style="padding: 15px 40px;">
                                <i class="fas fa-rocket"></i> Start Building
                            </button>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Modals -->
    
    <!-- Buy Ticket Modal -->
    <div class="modal fade" id="buyTicketModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5><i class="fas fa-ticket-alt me-2"></i> Buy Game Tickets</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="wallet-card" style="height: 100%;">
                                <div class="wallet-card-header">
                                    <i class="fas fa-wallet"></i>
                                    <h3 class="wallet-card-title">Your Balance</h3>
                                </div>
                                <div class="wallet-balance" id="modalBalance">{{ wallet_data.star_tokens }} STAR</div>
                                <div class="wallet-label">{{ wallet_data.tickets }} tickets available</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Number of Tickets</label>
                                <input type="number" class="form-control" id="ticketAmount" min="1" max="50" value="1">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Total Cost</label>
                                <div class="wallet-balance" id="ticketCost">50 STAR</div>
                                <div class="wallet-label">1 ticket = 50 STAR tokens</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-outline-gradient" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn-gradient" id="confirmBuyTickets">
                        <i class="fas fa-shopping-cart"></i> Buy Tickets
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Send Tokens Modal -->
    <div class="modal fade" id="sendTokensModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5><i class="fas fa-paper-plane me-2"></i> Send STAR Tokens</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label">Recipient Address</label>
                        <input type="text" class="form-control" placeholder="0x..." id="recipientAddress">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Amount (STAR)</label>
                        <input type="number" class="form-control" id="sendAmount" min="1" max="{{ wallet_data.star_tokens }}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Network Fee</label>
                        <div class="wallet-label">~0.001 HBAR (Hedera fee)</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-outline-gradient" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn-gradient" id="confirmSendTokens">
                        <i class="fas fa-paper-plane"></i> Send Tokens
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Submit Strategy Modal -->
    <div class="modal fade" id="submitStrategyModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5><i class="fas fa-lightbulb me-2"></i> Submit New Strategy</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="strategyForm">
                        <div class="form-group">
                            <label class="form-label">Select Game</label>
                            <select class="form-control" id="strategyGame">
                                {% for game in active_games %}
                                <option value="{{ game.id }}">{{ game.name }} ({{ game.type }})</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Strategy Title</label>
                            <input type="text" class="form-control" placeholder="e.g., AI-Powered AgriTech Solution" id="strategyTitle">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Business Plan</label>
                            <textarea class="form-control" rows="8" placeholder="Describe your business strategy in detail..." id="strategyContent"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Upload Supporting Documents (Optional)</label>
                            <input type="file" class="form-control" id="strategyFile" accept=".pdf,.doc,.docx">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-outline-gradient" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn-gradient" id="submitStrategy">
                        <i class="fas fa-paper-plane"></i> Submit Strategy
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Venture Modal -->
    <div class="modal fade" id="createVentureModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5><i class="fas fa-plus me-2"></i> Create New Venture</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p style="color: var(--secondary); margin-bottom: 20px;">
                        <i class="fas fa-info-circle"></i> Ventures require 1000 STAR tokens to create and become active after community voting.
                    </p>
                    <div class="form-group">
                        <label class="form-label">Venture Name</label>
                        <input type="text" class="form-control" placeholder="e.g., EcoEnergy Africa" id="ventureName">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Industry</label>
                        <select class="form-control" id="ventureIndustry">
                            <option value="tech">Technology</option>
                            <option value="energy">Energy</option>
                            <option value="agriculture">Agriculture</option>
                            <option value="finance">Finance</option>
                            <option value="healthcare">Healthcare</option>
                            <option value="education">Education</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Problem Statement</label>
                        <textarea class="form-control" rows="4" placeholder="What problem does this venture solve?" id="ventureProblem"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Initial Investment (STAR tokens)</label>
                        <input type="number" class="form-control" min="1000" value="1000" id="ventureInvestment">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-outline-gradient" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn-gradient" id="createVenture">
                        <i class="fas fa-rocket"></i> Create Venture (1000 STAR)
                    </button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
<script>
    // Section Navigation
    document.addEventListener('DOMContentLoaded', function() {
        const navItems = document.querySelectorAll('.nav-item');
        const sections = document.querySelectorAll('.content-section');
        const sectionTitle = document.getElementById('sectionTitle');
        const sectionSubtitle = document.getElementById('sectionSubtitle');
        
        // Get section from URL or default to overview
        const urlParams = new URLSearchParams(window.location.search);
        const initialSection = urlParams.get('section') || 'overview';
        
        // Function to show section
        function showSection(sectionId) {
            // Hide all sections
            sections.forEach(section => {
                section.style.display = 'none';
            });
            
            // Show selected section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.style.display = 'block';
            }
            
            // Update active nav item
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-section') === sectionId) {
                    item.classList.add('active');
                }
            });
            
            // Update URL without reload
            history.replaceState(null, '', `?section=${sectionId}`);
            
            // Update title and subtitle
            updateSectionTitle(sectionId);
        }
        
        // Set section titles
        const sectionTitles = {
            'overview': { title: 'Venture Dashboard', subtitle: 'Welcome back, {{ user.first_name }}! Ready to build empires?' },
            'games': { title: 'Active Games', subtitle: 'Join venture arenas and compete for equity' },
            'ventures': { title: 'My Ventures', subtitle: 'Manage your startup investments and equity' },
            'wallet': { title: 'Venture Wallet', subtitle: 'Manage tokens, tickets, and NFTs' },
            'profile': { title: 'Profile Settings', subtitle: 'Customize your venture profile' },
            'leaderboard': { title: 'Leaderboard', subtitle: 'Top venture capitalists and entrepreneurs' },
            'strategy': { title: 'Strategy Builder', subtitle: 'Craft winning business strategies' }
        };
        
        function updateSectionTitle(sectionId) {
            const titleData = sectionTitles[sectionId];
            if (titleData) {
                sectionTitle.textContent = titleData.title;
                sectionSubtitle.textContent = titleData.subtitle;
            }
        }
        
        // Nav item click handlers
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const sectionId = this.getAttribute('data-section');
                showSection(sectionId);
                
                // Close mobile sidebar if open
                if (window.innerWidth <= 992) {
                    document.getElementById('dashboardSidebar').classList.remove('active');
                }
            });
        });
        
        // Show initial section
        showSection(initialSection);
        
        // Mobile sidebar toggle
        const sidebarToggle = document.getElementById('sidebarToggle');
        const dashboardSidebar = document.getElementById('dashboardSidebar');
        
        sidebarToggle.addEventListener('click', function() {
            dashboardSidebar.classList.toggle('active');
        });
        
        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', function(e) {
            if (window.innerWidth <= 992 && 
                !dashboardSidebar.contains(e.target) && 
                !sidebarToggle.contains(e.target) &&
                dashboardSidebar.classList.contains('active')) {
                dashboardSidebar.classList.remove('active');
            }
        });
        
        // Initialize tooltips
        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        const tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
        
        // Initialize ticket amount calculator
        const ticketAmount = document.getElementById('ticketAmount');
        const ticketCost = document.getElementById('ticketCost');
        
        if (ticketAmount && ticketCost) {
            ticketAmount.addEventListener('input', function() {
                const amount = parseInt(this.value) || 1;
                const cost = amount * 50;
                ticketCost.textContent = cost + ' STAR';
            });
        }
    });
    
    // Wallet Functions
    function copyWalletAddress() {
        const address = '{{ wallet_data.full_public_key }}';
        navigator.clipboard.writeText(address).then(() => {
            showToast('Wallet address copied to clipboard!', 'success');
        });
    }
    
    function viewOnExplorer() {
        const hederaId = '{{ wallet.recipient_id }}';
        if (hederaId) {
            window.open(`https://hashscan.io/testnet/account/${hederaId}`, '_blank');
        } else {
            showToast('Wallet ID not available', 'warning');
        }
    }
    
    function showFullAddress() {
        const address = '{{ wallet_data.full_public_key }}';
        const modal = new bootstrap.Modal(document.getElementById('fullAddressModal') || createModal('Full Wallet Address', address));
        modal.show();
    }
    
    // Game Functions
    document.querySelectorAll('.join-game').forEach(button => {
        button.addEventListener('click', function() {
            const gameId = this.getAttribute('data-game-id');
            showToast(`Joining game ${gameId}...`, 'info');
            // Add game join logic here
        });
    });
    
    document.querySelectorAll('.view-game').forEach(button => {
        button.addEventListener('click', function() {
            const gameId = this.getAttribute('data-game-id');
            window.location.href = `/game/${gameId}/`;
        });
    });
    
    // Form Submissions
    document.getElementById('profileForm')?.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const formData = new FormData(this);
        
        fetch('{% url "update_profile" %}', {
            method: 'POST',
            body: formData,
            headers: {
                'X-Requested-With': 'XMLHttpRequest'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showToast('Profile updated successfully!', 'success');
            } else {
                showToast('Error: ' + data.error, 'danger');
            }
        })
        .catch(error => {
            showToast('Network error: ' + error, 'danger');
        });
    });
    
    // Buy Tickets
    document.getElementById('confirmBuyTickets')?.addEventListener('click', function() {
        const amount = parseInt(document.getElementById('ticketAmount').value) || 1;
        
        fetch('{% url "buy_ticket" %}', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': getCookie('csrftoken')
            },
            body: JSON.stringify({
                game_id: 1,
                amount: amount
            })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showToast(data.message, 'success');
                // Update UI
                document.querySelector('.stat-badge:nth-child(2) span').textContent = data.tickets;
                document.getElementById('modalBalance').textContent = data.balance + ' STAR';
                // Close modal
                bootstrap.Modal.getInstance(document.getElementById('buyTicketModal')).hide();
            } else {
                showToast('Error: ' + data.error, 'danger');
            }
        })
        .catch(error => {
            showToast('Network error: ' + error, 'danger');
        });
    });
    
    // Send Tokens
    document.getElementById('confirmSendTokens')?.addEventListener('click', function() {
        const recipient = document.getElementById('recipientAddress').value;
        const amount = document.getElementById('sendAmount').value;
        
        if (!recipient || !amount) {
            showToast('Please fill all fields', 'warning');
            return;
        }
        
        showToast(`Sending ${amount} STAR to ${recipient}...`, 'info');
        // Add token transfer logic here
    });
    
    // Submit Strategy
    document.getElementById('submitStrategy')?.addEventListener('click', function() {
        const gameId = document.getElementById('strategyGame').value;
        const title = document.getElementById('strategyTitle').value;
        const content = document.getElementById('strategyContent').value;
        
        if (!title || !content) {
            showToast('Please fill all required fields', 'warning');
            return;
        }
        
        const formData = new FormData();
        formData.append('game_id', gameId);
        formData.append('strategy', content);
        formData.append('title', title);
        
        // Add file if exists
        const fileInput = document.getElementById('strategyFile');
        if (fileInput.files[0]) {
            formData.append('attachment', fileInput.files[0]);
        }
        
        fetch('{% url "submit_strategy" %}', {
            method: 'POST',
            body: formData,
            headers: {
                'X-CSRFToken': getCookie('csrftoken')
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showToast(data.message, 'success');
                bootstrap.Modal.getInstance(document.getElementById('submitStrategyModal')).hide();
                // Reset form
                document.getElementById('strategyForm').reset();
            } else {
                showToast('Error: ' + data.error, 'danger');
            }
        })
        .catch(error => {
            showToast('Network error: ' + error, 'danger');
        });
    });
    
    // Helper Functions
    function showToast(message, type = 'info') {
        const toastContainer = document.getElementById('alertContainer');
        const toast = document.createElement('div');
        toast.className = `alert alert-${type} alert-dismissible fade show`;
        toast.innerHTML = `
            <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'danger' ? 'times-circle' : 'info-circle'} me-2"></i>
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        `;
        toastContainer.appendChild(toast);
        
        setTimeout(() => {
            if (toast.parentNode) {
                const bsAlert = new bootstrap.Alert(toast);
                bsAlert.close();
            }
        }, 5000);
    }
    
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    
    function createModal(title, content) {
        const modalId = 'customModal';
        let modal = document.getElementById(modalId);
        
        if (!modal) {
            modal = document.createElement('div');
            modal.id = modalId;
            modal.className = 'modal fade';
            modal.innerHTML = `
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5>${title}</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <pre style="color: var(--light); background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; overflow: auto;">${content}</pre>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn-outline-gradient" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        } else {
            modal.querySelector('.modal-header h5').textContent = title;
            modal.querySelector('.modal-body pre').textContent = content;
        }
        
        return modal;
    }
    
    // Auto-refresh wallet balance every 30 seconds
    setInterval(() => {
        fetch('{% url "api_wallet_balance" %}')
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Update balance display
                const balanceElements = document.querySelectorAll('.stat-badge:first-child span');
                balanceElements.forEach(el => {
                    el.textContent = data.balance;
                });
            }
        });
    }, 30000);
</script>
{% endblock %}